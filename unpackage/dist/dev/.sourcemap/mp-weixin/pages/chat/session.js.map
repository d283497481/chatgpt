{"version":3,"sources":["uni-app:///main.js","webpack:////Users/gulihua/tmp/wxmini-chatgpt/pages/chat/session.nvue?84c0","webpack:////Users/gulihua/tmp/wxmini-chatgpt/pages/chat/session.nvue?d1ad","webpack:////Users/gulihua/tmp/wxmini-chatgpt/pages/chat/session.nvue?a58d","webpack:////Users/gulihua/tmp/wxmini-chatgpt/pages/chat/session.nvue?59ee","uni-app:///pages/chat/session.nvue","webpack:////Users/gulihua/tmp/wxmini-chatgpt/pages/chat/session.nvue?bfeb","webpack:////Users/gulihua/tmp/wxmini-chatgpt/pages/chat/session.nvue?15c2","webpack:////Users/gulihua/tmp/wxmini-chatgpt/pages/chat/session.nvue?b13b","webpack:////Users/gulihua/tmp/wxmini-chatgpt/pages/chat/session.nvue?eb1a","webpack:////Users/gulihua/tmp/wxmini-chatgpt/pages/chat/session.nvue?b818","webpack:////Users/gulihua/tmp/wxmini-chatgpt/pages/chat/session.nvue?34b7"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","extraIconChat","color","size","type","options","text","style","backgroundColor","uid","safeBottom","tabbarHeight","dropdownlist","isLogin","sessionList","loading","loginType","navTip","showDemoTips","isDebug","isSync","isAnno","announcement","mixins","watch","onLoad","onShareAppMessage","title","path","imageUrl","onShareTimeline","computed","token","onPullDownRefresh","onReachBottom","onHide","uni","onUnload","onShow","keywords","onReady","methods","chatWindow","url","swipeClick","chat_sessions","console","getSessionList","list","hasSync","createTime","id","getSessionListRes","that","header","success","fail","getAnnouncement","showNotify","message","duration","safeAreaInsetTop","showToast","position"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,gBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiI;AACjI;AAC4D;AACL;AACa;AACwB;AACxB;;;AAGpE;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,+FAAM;AACR,EAAE,wGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACzBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,kRAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,aAAa,+TAEN;AACP,KAAK;AACL;AACA,aAAa,mZAEN;AACP,KAAK;AACL;AACA,aAAa,qRAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,iPAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpFA;AAAA;AAAA;AAAA;AAAuzB,CAAgB,syBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;ACiF30B;AAGA;AAAA;AAAA;AAAA,eACA;EACAC;IACA;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAC;QACAC;UACAC;QACA;MACA;QACAF;QACAC;UACAC;QACA;MACA;MACAC;MACAC;MACAC;MAKAC;MAEAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IAEA;EACA;EACAC;EACAC,QAEA;EACAC;IACA;IACA;MACA;IACA;MACA;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACA;MACAH;IACA;EACA;EAEAI,4BACA;IACAC;MAAA;IAAA;EACA,GACA;EACAC;IACA;MACA;IACA;EACA;EACAC;IACA;EAAA,CACA;EACAC;IACAC;EACA;EACAC;EACAC;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;MACA;MACA;QACA;UACA;UACA;UACA;YACA;UACA;UACA;UACA;YACAC;UACA;UACA;QAEA;MACA;IAEA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACAC;MACA;MACAN;QACAO;MACA;IACA;IACAC;MACA;QACA;UACA;UACA;UACA;UACAC;UACA;UACAT;UACAA;QACA;UACAU;QACA;MACA,2BAEA;IACA;IACAC;MACA;MACA;MACA;QACAC;QACAC;MACA;MACA;QACA;UACAC;UACAC;UACAxB;QACA;QACAqB;MACA;MACA;QACA;UACA;QACA;QACA;UACA;QACA;QACA;UACA;QACA;QACA;MACA;MACA;QACA;MACA;IAEA;IAGAI;MACA;MACAC;MACAA;MACAjB;QACAT;MACA;MACA;MACA;MACA;QACA2B;UACA;QACA;MACA;MACAR;MACAV;QACAO;QACA3C;QACAsD;QACAC;UACAnB;UACAA;UACAiB;UACA;YACAA;YACA;cACAA;cACAjB;cACA;YACA;UACA;YACAiB;YACA;UACA;QAEA;QACAG;UACAH;UACAjB;UACAiB;UACAjB;UACA;QACA;MACA;IAGA;IAEAqB;MACA;MACAX;MACAV;QACAO;QACA3C;QACAuD;UACA;YACA;YACA;cACA;gBACAF;gBACAA;cACA;gBACAA;gBACAA;cACA;YAEA;cACAA;cACAA;YACA;UAEA;YACAP;UACA;QACA;QACAU;UACAV;QACA;MACA;IAGA;IAEAY;MAEA;QACAtD;QACAuD;QACAC;QACAC;MACA;IACA;IACAC;MAEA;QACAH;QACAvD;QACAwD;QACAG;MACA;IACA;EAEA;AACA;AAAA,2B;;;;;;;;;;;;;AC3WA;AAAA;AAAA;AAAA;AAA8pC,CAAgB,mmCAAG,EAAC,C;;;;;;;;;;;ACAlrC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAsrC,CAAgB,2nCAAG,EAAC,C;;;;;;;;;;;ACA1sC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAA8pC,CAAgB,mmCAAG,EAAC,C;;;;;;;;;;;ACAlrC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/chat/session.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/chat/session.nvue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./session.nvue?vue&type=template&id=7e6d3474&scoped=true&\"\nvar renderjs\nimport script from \"./session.nvue?vue&type=script&lang=js&\"\nexport * from \"./session.nvue?vue&type=script&lang=js&\"\nimport style0 from \"./session.nvue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./session.nvue?vue&type=style&index=1&id=7e6d3474&scoped=true&lang=css&\"\nimport style2 from \"./session.nvue?vue&type=style&index=2&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7e6d3474\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/chat/session.nvue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./session.nvue?vue&type=template&id=7e6d3474&scoped=true&\"","var components\ntry {\n  components = {\n    uniNavBar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar\" */ \"@/uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.vue\"\n      )\n    },\n    uniNoticeBar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-notice-bar/components/uni-notice-bar/uni-notice-bar\" */ \"@/uni_modules/uni-notice-bar/components/uni-notice-bar/uni-notice-bar.vue\"\n      )\n    },\n    uniList: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-list/components/uni-list/uni-list\" */ \"@/uni_modules/uni-list/components/uni-list/uni-list.vue\"\n      )\n    },\n    uniSwipeAction: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-swipe-action/components/uni-swipe-action/uni-swipe-action\" */ \"@/uni_modules/uni-swipe-action/components/uni-swipe-action/uni-swipe-action.vue\"\n      )\n    },\n    uniSwipeActionItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-swipe-action/components/uni-swipe-action-item/uni-swipe-action-item\" */ \"@/uni_modules/uni-swipe-action/components/uni-swipe-action-item/uni-swipe-action-item.vue\"\n      )\n    },\n    uniListChat: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-list/components/uni-list-chat/uni-list-chat\" */ \"@/uni_modules/uni-list/components/uni-list-chat/uni-list-chat.vue\"\n      )\n    },\n    uNotify: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-notify/u-notify\" */ \"@/uni_modules/uview-ui/components/u-notify/u-notify.vue\"\n      )\n    },\n    uToast: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-toast/u-toast\" */ \"@/uni_modules/uview-ui/components/u-toast/u-toast.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.sessionList, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var g0 = _vm.$store.state.utils.formatChatTime(item.createTime)\n    return {\n      $orig: $orig,\n      g0: g0,\n    }\n  })\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./session.nvue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./session.nvue?vue&type=script&lang=js&\"","<style>\n  view,\n  label,\n  swiper-item,\n  scroll-view {\n    display:flex;\n    flex-direction:column;\n    flex-shrink: 0;\n    flex-grow: 0;\n    flex-basis: auto;\n    align-items: stretch;\n    align-content: flex-start;\n  }\n  view,\n  image,\n  input,\n  scroll-view,\n  swiper,\n  swiper-item,\n  text,\n  textarea,\n  video {\n    position: relative;\n    border: 0px solid #000000;\n    box-sizing: border-box;\n  }\n  swiper-item {\n    position: absolute;\n  }\n  button {\n    margin: 0;\n  }\n</style>\n<template>\r\n\t<view class=\"\">\r\n\t\t<view class=\"nvue-page-head\" ref=\"pagehead\" id=\"pagehead\">\r\n\t\t\t<view class=\"navbar\" ref=\"navbar\">\r\n\t\t\t\t<!--  #ifndef  MP-WEIXIN -->\r\n\t\t\t\t<uni-nav-bar :fixed=\"false\" :status-bar=\"true\" @clickRight=\"chatWindow('-1','新会话')\" loading=\"loading\"\r\n\t\t\t\t\t:rightIconBool=\"true\" iconFlag=\"true\" right-icon=\"icon-chat_add\" iconSize=\"22px\" height=\"40px\"\r\n\t\t\t\t\t:title=\"navTip\"></uni-nav-bar>\r\n\t\t\t\t<!--  #endif -->\r\n\t\t\t\t<!--  #ifdef  MP-WEIXIN -->\r\n\t\t\t\t<uni-nav-bar :fixed=\"false\" :leftIconBool=\"true\" iconFlag=\"true\" left-icon=\"icon-chat_add\"\r\n\t\t\t\t\tloading=\"loading\" iconSize=\"22px\" :status-bar=\"true\" @clickLeft=\"chatWindow('-1','新会话')\"\r\n\t\t\t\t\t:rightIconBool=\"true\" :title=\"navTip\">\r\n\t\t\t\t</uni-nav-bar>\r\n\t\t\t\t<!--  #endif -->\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<uni-notice-bar scrollable v-if='isAnno' :text=\"announcement\"></uni-notice-bar>\r\n\t\t<uni-list :border=\"false\" :style=\"{'margin-bottom':tabbarHeight+'rpx'}\">\r\n\t\t\t<!--  #ifdef  APP-PLUS -->\r\n\t\t\t<cell>\r\n\t\t\t\t<!--  #endif -->\r\n\t\t\t\t<uni-swipe-action class=\"swipe-action\">\r\n\t\t\t\t\t<uni-swipe-action-item :threshold=\"80\" :rightOptions=\"options\" v-for=\"(item, index) in sessionList\"\r\n\t\t\t\t\t\t:key=\"index\" @click=\"swipeClick($event,index)\">\r\n\r\n\t\t\t\t\t\t<uni-list-chat :arrayIndex=\"index\" :border=\"true\" :title=\"item.title\"\r\n\t\t\t\t\t\t\tavatar=\"/static/image/ai.png\" :clickable=\"true\" badge-positon=\"left\" :note=\"item.keywords\"\r\n\t\t\t\t\t\t\t@click=\"chatWindow(item.id,item.title)\">\r\n\r\n\t\t\t\t\t\t\t<view class=\"chat-custom-right\">\r\n\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\tclass=\"chat-custom-text\">{{$store.state.utils.formatChatTime(item.createTime)}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</uni-list-chat>\r\n\t\t\t\t\t</uni-swipe-action-item>\r\n\t\t\t\t</uni-swipe-action>\r\n\t\t\t\t<!--  #ifdef  APP-PLUS -->\r\n\t\t\t</cell>\r\n\t\t\t<!--  #endif -->\r\n\t\t</uni-list>\r\n\t\t<view>\r\n\t\t\t<u-notify ref=\"uNotify\"></u-notify>\r\n\t\t\t<u-toast ref=\"uToast\"></u-toast>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport {\r\n\t\tmapState\r\n\t} from 'vuex'\r\n\timport searchAnimation from './searchAnimation.js'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\textraIconChat: {\r\n\t\t\t\t\tcolor: '#4cd964',\r\n\t\t\t\t\tsize: '44',\r\n\t\t\t\t\ttype: 'chatbubble'\r\n\t\t\t\t},\r\n\t\t\t\toptions: [{\r\n\t\t\t\t\ttext: '标为已读',\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tbackgroundColor: '#4c4c4c'\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttext: '删除',\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tbackgroundColor: '#fa5151'\r\n\t\t\t\t\t}\r\n\t\t\t\t}],\r\n\t\t\t\tuid: \"\",\r\n\t\t\t\tsafeBottom: '',\r\n\t\t\t\ttabbarHeight: '',\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tdropdownlist: 'padding:10rpx;padding-left: 40rpx;',\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\tdropdownlist: 'padding:10rpx;',\r\n\t\t\t\t// #endif\r\n\t\t\t\tisLogin: false,\r\n\t\t\t\tsessionList: [],\r\n\t\t\t\tloading: false,\r\n\t\t\t\tloginType: '',\r\n\t\t\t\tnavTip: '会话列表',\r\n\t\t\t\tshowDemoTips: true,\r\n\t\t\t\tisDebug: false,\r\n\t\t\t\tisSync: false,\r\n\t\t\t\tisAnno: false,\r\n\t\t\t\tannouncement: ''\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tmixins: [searchAnimation],\r\n\t\twatch: {\r\n\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tlet status = uni.getStorageSync('status');\r\n\t\t\tif (status) {\r\n\t\t\t\tthis.getAnnouncement();\r\n\t\t\t} else {\r\n\t\t\t\tthis.isAnno = true;\r\n\t\t\t\tthis.announcement = '服务器正在维护中~';\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShareAppMessage(res) {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: getApp().globalData.name,\r\n\t\t\t\tpath: '/pages/chat/session',\r\n\t\t\t\timageUrl: '/static/image/share_screen_slot.png'\r\n\t\t\t}\r\n\t\t},\n\t\t\n\t\tonShareTimeline: function (res) {\n\t\t   return {\n\t\t   \ttitle: getApp().globalData.name,\n\t\t   }\n\t\t},\n\r\n\t\tcomputed: {\r\n\t\t\t...mapState({\r\n\t\t\t\ttoken: state => state.token,\r\n\t\t\t}),\r\n\t\t},\r\n\t\tonPullDownRefresh() {\r\n\t\t\tif ((this.loginType === 'pwd' || this.loginType === 'token') && this.isSync) {\r\n\t\t\t\tthis.getSessionListRes();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReachBottom() {\r\n\t\t\t// this.getSessionListRes();\r\n\t\t},\r\n\t\tonHide() {\r\n\t\t\tuni.hideKeyboard();\r\n\t\t},\r\n\t\tonUnload() {},\r\n\t\tonShow() {\r\n\t\t\tthis.isLogin = uni.getStorageSync('is_login');\r\n\t\t\tthis.loginType = uni.getStorageSync('login_type');\r\n\t\t\tthis.isSync = uni.getStorageSync('sync_session');\r\n\t\t\tthis.sessionList = [];\r\n\r\n\t\t\tthis.isDebug = uni.getStorageSync('isDebug');\r\n\t\t\tthis.getSessionList()\r\n\t\t\tif (this.sessionList && this.sessionList.length > 0) {\r\n\t\t\t\tlet chatList = uni.getStorageSync('chatList');\r\n\t\t\t\tif (chatList) {\r\n\t\t\t\t\tfor (let i = 0; i < this.sessionList.length; i++) {\r\n\t\t\t\t\t\tlet id = this.sessionList[i].id;\r\n\t\t\t\t\t\tlet list = chatList[id]\r\n\t\t\t\t\t\tif (!list) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet keywords = list[list.length - 1].content;\r\n\t\t\t\t\t\tif (keywords) {\r\n\t\t\t\t\t\t\tkeywords = keywords.replaceAll(\"\\n\", \"\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.sessionList[i].keywords = keywords;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tthis.searchBoxH = (this.systemInfo.windowHeight - this.systemInfo.statusBarHeight - 36 - 12) * 2;\r\n\t\t\tthis.tabbarHeight = this.systemInfo.windowBottom * 2;\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tchatWindow: function(sessionId, name) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/chat/chat?id=' + sessionId + \"&name=\" + name,\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tswipeClick: function(e, index) {\r\n\t\t\t\tif (e.index === 1) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlet key = `chat_sessions_${this.user._id}`\r\n\t\t\t\t\t\tvar chat_sessions = uni.getStorageSync(key);\r\n\t\t\t\t\t\tvar toId = chat_sessions[index].id;\r\n\t\t\t\t\t\tchat_sessions.splice(index, 1);\r\n\t\t\t\t\t\tlet chatDetailKey = `chatDetail_${this.user._id}_${toId}`\r\n\t\t\t\t\t\tuni.setStorageSync(chatDetailKey, []);\r\n\t\t\t\t\t\tuni.setStorageSync(key, chat_sessions);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (e.index === 0) {\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetSessionList: function() {\r\n\t\t\t\tlet list = uni.getStorageSync('sessionList');\r\n\t\t\t\tlet hasSync = true;\r\n\t\t\t\tif (!list) {\r\n\t\t\t\t\tlist = []\r\n\t\t\t\t\thasSync = false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.isLogin) {\r\n\t\t\t\t\tlet session = {\r\n\t\t\t\t\t\tcreateTime: (new Date()).getTime(),\r\n\t\t\t\t\t\tid: '99999999',\r\n\t\t\t\t\t\ttitle: 'Demo Chat'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlist.push(session);\r\n\t\t\t\t}\r\n\t\t\t\tif (this.loginType === 'pwd' || this.loginType === 'token') {\r\n\t\t\t\t\tif (this.isSync && list.length === 0 && !hasSync) {\r\n\t\t\t\t\t\tthis.getSessionListRes();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.isSync && list.length > 0) {\r\n\t\t\t\t\t\tthis.sessionList = list;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!this.isSync && list.length > 0) {\r\n\t\t\t\t\t\tthis.sessionList = list.reverse()\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.isDebug || this.loginType === 'api' || !this.isLogin) {\r\n\t\t\t\t\tthis.sessionList = list.reverse()\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\r\n\t\t\tgetSessionListRes: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.loading = true\r\n\t\t\t\tthat.navTip = '加载中'\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '正在同步会话...'\r\n\t\t\t\t});\r\n\t\t\t\tlet header = {};\r\n\t\t\t\tlet token = uni.getStorageSync('token')\r\n\t\t\t\tif (token) {\r\n\t\t\t\t\theader = {\r\n\t\t\t\t\t\t\"Authorization\": \"Bearer \" + token,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\">>request sessionList...\");\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: getApp().globalData.server + '/backend-api/conversations',\r\n\t\t\t\t\tdata: {},\r\n\t\t\t\t\theader: header,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tuni.stopPullDownRefresh()\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tthat.loading = false\r\n\t\t\t\t\t\tif (res.data.status === '000000') {\r\n\t\t\t\t\t\t\tthat.navTip = '会话列表'\r\n\t\t\t\t\t\t\tif (res.data.list) {\r\n\t\t\t\t\t\t\t\tthat.sessionList = res.data.list;\r\n\t\t\t\t\t\t\t\tuni.setStorageSync('sessionList', that.sessionList)\r\n\t\t\t\t\t\t\t\treturn that.showNotify('同步成功!', 'success');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat.navTip = '服务出错'\r\n\t\t\t\t\t\t\treturn that.showNotify('服务出错!', 'error');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\tthat.loading = false\r\n\t\t\t\t\t\tuni.stopPullDownRefresh()\r\n\t\t\t\t\t\tthat.navTip = '服务出错'\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\treturn that.showNotify('服务出错!', 'error');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t},\r\n\r\n\t\t\tgetAnnouncement: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tconsole.log(\">>request announcement...\");\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: getApp().globalData.server + '/announcement',\r\n\t\t\t\t\tdata: {},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.data.status === '000000') {\r\n\t\t\t\t\t\t\tlet anno = res.data.content;\r\n\t\t\t\t\t\t\tif (anno) {\r\n\t\t\t\t\t\t\t\tif (anno !== 'null') {\r\n\t\t\t\t\t\t\t\t\tthat.isAnno = true;\r\n\t\t\t\t\t\t\t\t\tthat.announcement = anno;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthat.isAnno = false;\r\n\t\t\t\t\t\t\t\t\tthat.announcement = '';\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthat.isAnno = false;\r\n\t\t\t\t\t\t\t\tthat.announcement = '';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t},\r\n\r\n\t\t\tshowNotify(title, type) {\r\n\r\n\t\t\t\tthis.$refs.uNotify.show({\r\n\t\t\t\t\ttype: type,\r\n\t\t\t\t\tmessage: title,\r\n\t\t\t\t\tduration: 1000 * 3,\r\n\t\t\t\t\tsafeAreaInsetTop: true\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tshowToast(msg) {\r\n\r\n\t\t\t\tthis.$refs.uToast.show({\r\n\t\t\t\t\tmessage: msg,\r\n\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\tposition: 'bottom'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t/* #ifdef H5 */\r\n\tpage {\r\n\t\tbackground-color: white;\r\n\t}\r\n\r\n\t/* #endif */\r\n\t.nvue-page-head {\r\n\t\tbackground-color: #ededed;\r\n\t}\r\n\r\n\t.nvue-page-search {\r\n\t\twidth: 750rpx;\r\n\t\t/* margin-top: -88rpx; */\r\n\t}\r\n\r\n\t.swipe-action {}\r\n\r\n\t.navbar {\r\n\t\tbackground-color: #ededed;\r\n\t}\r\n\r\n\t.fixedView {\r\n\t\tposition: fixed;\r\n\t\twidth: 750rpx;\r\n\t\theight: 60rpx;\r\n\t\tbackground-color: transparent;\r\n\t}\r\n\r\n\t.u-title {\r\n\t\tfont-weight: 400;\r\n\t}\r\n\r\n\r\n\t.dropdown {\r\n\t\tposition: fixed;\r\n\t\tz-index: 10071;\r\n\r\n\t\t/*  #ifndef  MP-WEIXIN  */\r\n\t\ttop: 180rpx;\r\n\t\tright: 20rpx;\r\n\t\t/*  #endif  */\r\n\r\n\t\t/*  #ifdef  MP-WEIXIN  */\r\n\t\ttop: 160rpx;\r\n\t\tleft: 20rpx;\r\n\t\t/*  #endif  */\r\n\r\n\r\n\t}\r\n\r\n\t.search-label {\r\n\t\tpadding: 20rpx;\r\n\t\tbackground-color: #ededed;\r\n\t}\r\n\r\n\t.search-label-text {\r\n\t\tfont-size: 30rpx;\r\n\t}\r\n\r\n\t.item {\r\n\t\tpadding: 20rpx;\r\n\t\tflex-direction: row;\r\n\t}\r\n\r\n\t.avatar {\r\n\t\twidth: 100rpx;\r\n\r\n\t\theight: 100rpx;\r\n\t\tmargin-right: 20rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.title-wrap {\r\n\t\tflex-direction: column;\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.cell {\r\n\t\tflex-direction: row;\r\n\t\tpadding-top: 4rpx;\r\n\t\tpadding-bottom: 20rpx;\r\n\t}\r\n\r\n\t.chat-time {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #c7c7c7;\r\n\t\tposition: absolute;\r\n\t\tright: 24rpx;\r\n\t}\r\n\r\n\t.chat-custom-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.dropdown-list {\r\n\t\tbackground-color: #4c4c4c !important;\r\n\t\tborder-radius: 10rpx;\r\n\t}\r\n</style>\r\n<style>\r\n\t.uni-navbar__header-btns .uni-icons {\r\n\t\tfont-size: 20px !important;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./session.nvue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./session.nvue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1679050666366\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./session.nvue?vue&type=style&index=1&id=7e6d3474&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./session.nvue?vue&type=style&index=1&id=7e6d3474&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1679050666357\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./session.nvue?vue&type=style&index=2&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./session.nvue?vue&type=style&index=2&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1679050666351\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}